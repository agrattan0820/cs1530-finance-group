import { useQuery } from "@tanstack/react-query";
import { NextPage } from "next";
import Head from "next/head";
import React, { useEffect, useState } from "react";
import { fetchSchoolById } from "../../utils/queries";

const GradeResultPage: NextPage = () => {
  /**
   * Tasks
   * - Save grade to Supabase database
   * - Pull in grade from data, Zustand?
   * - Show info on the school
   * - Show share button
   * - Show save button
   */
  const [scoreResult, setScoreResult] = useState({
    gradeNumber: 10,
    schoolId: 100654,
    userId: 3,
    financialAidAmount: 12000,
    inOutState: "IN-STATE",
  });

  const [schoolId, setSchoolId] = useState(100654);

  const schoolQuery = useQuery({
    queryKey: ["school", schoolId],
    queryFn: () => fetchSchoolById(schoolId),
  });

  return (
    <div>
      <Head>
        <title>GradeMyAid</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="flex min-h-screen flex-col items-center justify-center bg-orange-300">
        <div>
          <p>Your grade:</p>
        </div>
        <div>
          <p className="text-9xl">{scoreResult.gradeNumber}</p>
        </div>
        <button className="rounded bg-blue-300 font-bold">Share Grade</button>
        <button className="rounded bg-red-400 font-bold">Save Grade</button>
        <pre>{JSON.stringify(schoolQuery, null, 2)}</pre>
      </main>
    </div>
  );
};

export default GradeResultPage;
